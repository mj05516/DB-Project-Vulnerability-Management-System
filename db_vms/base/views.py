from django.shortcuts import render
from .models import DiscussionRoom,Message



def home(request):
    context = {'nbar': 'home'}
    return render(request, 'base/home.html', context)

def discussion_room(request):
    disscuss_rooms = DiscussionRoom.objects.all()
    context = {'nbar': 'dr-home','rooms': disscuss_rooms}
    return render(request, 'base/dis-room-home.html', context)

def new_room(request):
    context = {'nbar': 'new-room',
                'title': 'New Room'}
    return render(request, 'base/make_room.html', context)

def d_room(request,pk):
    room = None
    for i in DiscussionRoom.objects.all():
        if i.id == int(pk):
            room = i
            break
    messages = Message.objects.filter(droom=room).order_by('-timestamp')
    context = {'nbar': 'd-room', 'room':room, 'messages':messages}
    return render(request, 'base/d-room.html', context)