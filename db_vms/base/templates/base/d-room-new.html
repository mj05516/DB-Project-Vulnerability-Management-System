{% extends "main.html" %}

{% load static %}



{% block content %}
<link href="{% static 'assets/lib/emojionearea/emojionearea.min.css'%}" rel="stylesheet">
<script src="{% static 'assets/lib/emojionearea/emojionearea.min.js'%}"></script>



<div class="card card-chat overflow-hidden">
  <div class="card-body d-flex p-0 h-100">
    <!-- <div class="chat-sidebar">
        <div class="contacts-list scrollbar-overlay">
          <div class="nav nav-tabs border-0 flex-column" role="tablist" aria-orientation="vertical">

            <div class="hover-actions-trigger chat-contact nav-item active" role="tab" id="chat-link-0" data-bs-toggle="tab" data-bs-target="#chat-0" aria-controls="chat-0" aria-selected="true">
              <div class="d-md-none d-lg-block">
                <div class="dropdown dropdown-active-trigger dropdown-chat">
                  <button class="hover-actions btn btn-link btn-sm text-400 dropdown-caret-none dropdown-toggle end-0 fs-0 mt-4 me-1 z-index-1 pb-2 mb-n2" type="button" data-boundary="viewport" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="fas fa-cog" data-fa-transform="shrink-3 down-4"></span></button>
                  <div class="dropdown-menu dropdown-menu-end border py-2 rounded-2"><a class="dropdown-item" href="#!">Mute</a>
                    <div class="dropdown-divider"></div><a class="dropdown-item" href="#!">Archive</a><a class="dropdown-item text-danger" href="#!">Delete</a>
                    <div class="dropdown-divider"></div><a class="dropdown-item" href="#!">Mark as Unread</a><a class="dropdown-item" href="#!">Something's Wrong</a><a class="dropdown-item" href="#!">Ignore Messsages</a><a class="dropdown-item" href="#!">Block Messages</a>
                  </div>
                </div>
              </div>
              <div class="d-flex p-3">
                <div class="avatar avatar-xl status-online">
                  <img class="rounded-circle" src="../assets/img/team/2.jpg" alt="" />

                </div>
                <div class="flex-1 chat-contact-body ms-2 d-md-none d-lg-block">
                  <div class="d-flex justify-content-between">
                    <h6 class="mb-0 chat-contact-title">Antony Hopkins</h6><span class="message-time fs--2">Tue</span>
                  </div>
                  <div class="min-w-0">
                    <div class="chat-contact-content pe-3">Antony
                      sent
                      6 photos
                    </div>
                    <div class="position-absolute bottom-0 end-0 hover-hide">
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="hover-actions-trigger chat-contact nav-item" role="tab" id="chat-link-1" data-bs-toggle="tab" data-bs-target="#chat-1" aria-controls="chat-1" aria-selected="false">
              <div class="d-md-none d-lg-block">
                <div class="dropdown dropdown-active-trigger dropdown-chat">
                  <button class="hover-actions btn btn-link btn-sm text-400 dropdown-caret-none dropdown-toggle end-0 fs-0 mt-4 me-1 z-index-1 pb-2 mb-n2" type="button" data-boundary="viewport" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="fas fa-cog" data-fa-transform="shrink-3 down-4"></span></button>
                  <div class="dropdown-menu dropdown-menu-end border py-2 rounded-2"><a class="dropdown-item" href="#!">Mute</a>
                    <div class="dropdown-divider"></div><a class="dropdown-item" href="#!">Archive</a><a class="dropdown-item text-danger" href="#!">Delete</a>
                    <div class="dropdown-divider"></div><a class="dropdown-item" href="#!">Mark as Unread</a><a class="dropdown-item" href="#!">Something's Wrong</a><a class="dropdown-item" href="#!">Ignore Messsages</a><a class="dropdown-item" href="#!">Block Messages</a>
                  </div>
                </div>
              </div>
              <div class="d-flex p-3">
                <div class="avatar avatar-xl">
                  <div class="rounded-circle overflow-hidden h-100 d-flex">
                    <div class="w-50 border-end"><img src="../assets/img/team/1.jpg" alt="" /></div>
                    <div class="w-50 d-flex flex-column"><img class="h-50 border-bottom" src="../assets/img/team/2.jpg" alt="" /><img class="h-50" src="../assets/img/team/3.jpg" alt="" /></div>
                  </div>
                </div>
                <div class="flex-1 chat-contact-body ms-2 d-md-none d-lg-block">
                  <div class="d-flex justify-content-between">
                    <h6 class="mb-0 chat-contact-title">Avengers</h6><span class="message-time fs--2">Sun</span>
                  </div>
                  <div class="min-w-0">
                    <div class="chat-contact-content pe-3">Bucky: <a href="#!" class="text-primary">@Emma</a> What do you think about the plan?
                    </div>
                    <div class="position-absolute bottom-0 end-0 hover-hide"><span class="fas fa-check text-success" data-fa-transform="shrink-5 down-4"></span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="hover-actions-trigger chat-contact nav-item" role="tab" id="chat-link-2" data-bs-toggle="tab" data-bs-target="#chat-2" aria-controls="chat-2" aria-selected="false">
              <div class="d-md-none d-lg-block">
                <div class="dropdown dropdown-active-trigger dropdown-chat">
                  <button class="hover-actions btn btn-link btn-sm text-400 dropdown-caret-none dropdown-toggle end-0 fs-0 mt-4 me-1 z-index-1 pb-2 mb-n2" type="button" data-boundary="viewport" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="fas fa-cog" data-fa-transform="shrink-3 down-4"></span></button>
                  <div class="dropdown-menu dropdown-menu-end border py-2 rounded-2"><a class="dropdown-item" href="#!">Mute</a>
                    <div class="dropdown-divider"></div><a class="dropdown-item" href="#!">Archive</a><a class="dropdown-item text-danger" href="#!">Delete</a>
                    <div class="dropdown-divider"></div><a class="dropdown-item" href="#!">Mark as Unread</a><a class="dropdown-item" href="#!">Something's Wrong</a><a class="dropdown-item" href="#!">Ignore Messsages</a><a class="dropdown-item" href="#!">Block Messages</a>
                  </div>
                </div>
              </div>
              <div class="d-flex p-3">
                <div class="avatar avatar-xl">
                  <img class="rounded-circle" src="../assets/img/team/1.jpg" alt="" />

                </div>
                <div class="flex-1 chat-contact-body ms-2 d-md-none d-lg-block">
                  <div class="d-flex justify-content-between">
                    <h6 class="mb-0 chat-contact-title">Emma Watson</h6><span class="message-time fs--2">Sun</span>
                  </div>
                  <div class="min-w-0">
                    <div class="chat-contact-content pe-3">You: ðŸ™‚
                    </div>
                    <div class="position-absolute bottom-0 end-0 hover-hide"><span class="fas fa-check text-success" data-fa-transform="shrink-5 down-4"></span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="hover-actions-trigger chat-contact nav-item unread-message" role="tab" id="chat-link-3" data-bs-toggle="tab" data-bs-target="#chat-3" aria-controls="chat-3" aria-selected="false">
              <div class="d-md-none d-lg-block">
                <div class="dropdown dropdown-active-trigger dropdown-chat">
                  <button class="hover-actions btn btn-link btn-sm text-400 dropdown-caret-none dropdown-toggle end-0 fs-0 mt-4 me-1 z-index-1 pb-2 mb-n2" type="button" data-boundary="viewport" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="fas fa-cog" data-fa-transform="shrink-3 down-4"></span></button>
                  <div class="dropdown-menu dropdown-menu-end border py-2 rounded-2"><a class="dropdown-item" href="#!">Mute</a>
                    <div class="dropdown-divider"></div><a class="dropdown-item" href="#!">Archive</a><a class="dropdown-item text-danger" href="#!">Delete</a>
                    <div class="dropdown-divider"></div><a class="dropdown-item" href="#!">Mark as Unread</a><a class="dropdown-item" href="#!">Something's Wrong</a><a class="dropdown-item" href="#!">Ignore Messsages</a><a class="dropdown-item" href="#!">Block Messages</a>
                  </div>
                </div>
              </div>
              <div class="d-flex p-3">
                <div class="avatar avatar-xl status-online">
                  <img class="rounded-circle" src="../assets/img/team/13.jpg" alt="" />

                </div>
                <div class="flex-1 chat-contact-body ms-2 d-md-none d-lg-block">
                  <div class="d-flex justify-content-between">
                    <h6 class="mb-0 chat-contact-title">Anna Karinina</h6><span class="message-time fs--2">Sat</span>
                  </div>
                  <div class="min-w-0">
                    <div class="chat-contact-content pe-3">What are you doing?
                    </div>
                    <div class="position-absolute bottom-0 end-0 hover-hide">
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="hover-actions-trigger chat-contact nav-item unread-message" role="tab" id="chat-link-4" data-bs-toggle="tab" data-bs-target="#chat-4" aria-controls="chat-4" aria-selected="false">
              <div class="d-md-none d-lg-block">
                <div class="dropdown dropdown-active-trigger dropdown-chat">
                  <button class="hover-actions btn btn-link btn-sm text-400 dropdown-caret-none dropdown-toggle end-0 fs-0 mt-4 me-1 z-index-1 pb-2 mb-n2" type="button" data-boundary="viewport" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="fas fa-cog" data-fa-transform="shrink-3 down-4"></span></button>
                  <div class="dropdown-menu dropdown-menu-end border py-2 rounded-2"><a class="dropdown-item" href="#!">Mute</a>
                    <div class="dropdown-divider"></div><a class="dropdown-item" href="#!">Archive</a><a class="dropdown-item text-danger" href="#!">Delete</a>
                    <div class="dropdown-divider"></div><a class="dropdown-item" href="#!">Mark as Unread</a><a class="dropdown-item" href="#!">Something's Wrong</a><a class="dropdown-item" href="#!">Ignore Messsages</a><a class="dropdown-item" href="#!">Block Messages</a>
                  </div>
                </div>
              </div>
              <div class="d-flex p-3">
                <div class="avatar avatar-xl status-online">
                  <img class="rounded-circle" src="../assets/img/team/4.jpg" alt="" />

                </div>
                <div class="flex-1 chat-contact-body ms-2 d-md-none d-lg-block">
                  <div class="d-flex justify-content-between">
                    <h6 class="mb-0 chat-contact-title">John Lee</h6><span class="message-time fs--2">Mon</span>
                  </div>
                  <div class="min-w-0">
                    <div class="chat-contact-content pe-3">How are you?
                    </div>
                    <div class="position-absolute bottom-0 end-0 hover-hide">
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="hover-actions-trigger chat-contact nav-item" role="tab" id="chat-link-5" data-bs-toggle="tab" data-bs-target="#chat-5" aria-controls="chat-5" aria-selected="false">
              <div class="d-md-none d-lg-block">
                <div class="dropdown dropdown-active-trigger dropdown-chat">
                  <button class="hover-actions btn btn-link btn-sm text-400 dropdown-caret-none dropdown-toggle end-0 fs-0 mt-4 me-1 z-index-1 pb-2 mb-n2" type="button" data-boundary="viewport" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="fas fa-cog" data-fa-transform="shrink-3 down-4"></span></button>
                  <div class="dropdown-menu dropdown-menu-end border py-2 rounded-2"><a class="dropdown-item" href="#!">Mute</a>
                    <div class="dropdown-divider"></div><a class="dropdown-item" href="#!">Archive</a><a class="dropdown-item text-danger" href="#!">Delete</a>
                    <div class="dropdown-divider"></div><a class="dropdown-item" href="#!">Mark as Unread</a><a class="dropdown-item" href="#!">Something's Wrong</a><a class="dropdown-item" href="#!">Ignore Messsages</a><a class="dropdown-item" href="#!">Block Messages</a>
                  </div>
                </div>
              </div>
              <div class="d-flex p-3">
                <div class="avatar avatar-xl status-online">
                  <div class="avatar-name rounded-circle"><span>BR</span></div>
                </div>
                <div class="flex-1 chat-contact-body ms-2 d-md-none d-lg-block">
                  <div class="d-flex justify-content-between">
                    <h6 class="mb-0 chat-contact-title">Bucky Robert</h6><span class="message-time fs--2">Wed</span>
                  </div>
                  <div class="min-w-0">
                    <div class="chat-contact-content pe-3">You: ðŸ‘‹
                    </div>
                    <div class="position-absolute bottom-0 end-0 hover-hide"><span class="fas fa-check text-400" data-fa-transform="shrink-5 down-4"></span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="hover-actions-trigger chat-contact nav-item" role="tab" id="chat-link-6" data-bs-toggle="tab" data-bs-target="#chat-6" aria-controls="chat-6" aria-selected="false">
              <div class="d-md-none d-lg-block">
                <div class="dropdown dropdown-active-trigger dropdown-chat">
                  <button class="hover-actions btn btn-link btn-sm text-400 dropdown-caret-none dropdown-toggle end-0 fs-0 mt-4 me-1 z-index-1 pb-2 mb-n2" type="button" data-boundary="viewport" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="fas fa-cog" data-fa-transform="shrink-3 down-4"></span></button>
                  <div class="dropdown-menu dropdown-menu-end border py-2 rounded-2"><a class="dropdown-item" href="#!">Mute</a>
                    <div class="dropdown-divider"></div><a class="dropdown-item" href="#!">Archive</a><a class="dropdown-item text-danger" href="#!">Delete</a>
                    <div class="dropdown-divider"></div><a class="dropdown-item" href="#!">Mark as Unread</a><a class="dropdown-item" href="#!">Something's Wrong</a><a class="dropdown-item" href="#!">Ignore Messsages</a><a class="dropdown-item" href="#!">Block Messages</a>
                  </div>
                </div>
              </div>
              <div class="d-flex p-3">
                <div class="avatar avatar-xl status-online">
                  <img class="rounded-circle" src="../assets/img/team/10.jpg" alt="" />

                </div>
                <div class="flex-1 chat-contact-body ms-2 d-md-none d-lg-block">
                  <div class="d-flex justify-content-between">
                    <h6 class="mb-0 chat-contact-title">John Bradley</h6><span class="message-time fs--2">Fri</span>
                  </div>
                  <div class="min-w-0">
                    <div class="chat-contact-content pe-3">Hello!
                    </div>
                    <div class="position-absolute bottom-0 end-0 hover-hide">
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="hover-actions-trigger chat-contact nav-item" role="tab" id="chat-link-7" data-bs-toggle="tab" data-bs-target="#chat-7" aria-controls="chat-7" aria-selected="false">
              <div class="d-md-none d-lg-block">
                <div class="dropdown dropdown-active-trigger dropdown-chat">
                  <button class="hover-actions btn btn-link btn-sm text-400 dropdown-caret-none dropdown-toggle end-0 fs-0 mt-4 me-1 z-index-1 pb-2 mb-n2" type="button" data-boundary="viewport" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="fas fa-cog" data-fa-transform="shrink-3 down-4"></span></button>
                  <div class="dropdown-menu dropdown-menu-end border py-2 rounded-2"><a class="dropdown-item" href="#!">Mute</a>
                    <div class="dropdown-divider"></div><a class="dropdown-item" href="#!">Archive</a><a class="dropdown-item text-danger" href="#!">Delete</a>
                    <div class="dropdown-divider"></div><a class="dropdown-item" href="#!">Mark as Unread</a><a class="dropdown-item" href="#!">Something's Wrong</a><a class="dropdown-item" href="#!">Ignore Messsages</a><a class="dropdown-item" href="#!">Block Messages</a>
                  </div>
                </div>
              </div>
              <div class="d-flex p-3">
                <div class="avatar avatar-xl status-online">
                  <img class="rounded-circle" src="../assets/img/team/11.jpg" alt="" />

                </div>
                <div class="flex-1 chat-contact-body ms-2 d-md-none d-lg-block">
                  <div class="d-flex justify-content-between">
                    <h6 class="mb-0 chat-contact-title">Rory McCann</h6><span class="message-time fs--2">Sun</span>
                  </div>
                  <div class="min-w-0">
                    <div class="chat-contact-content pe-3">You: ðŸ˜®
                    </div>
                    <div class="position-absolute bottom-0 end-0 hover-hide"><span class="fas fa-check text-400" data-fa-transform="shrink-5 down-4"></span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="hover-actions-trigger chat-contact nav-item" role="tab" id="chat-link-8" data-bs-toggle="tab" data-bs-target="#chat-8" aria-controls="chat-8" aria-selected="false">
              <div class="d-md-none d-lg-block">
                <div class="dropdown dropdown-active-trigger dropdown-chat">
                  <button class="hover-actions btn btn-link btn-sm text-400 dropdown-caret-none dropdown-toggle end-0 fs-0 mt-4 me-1 z-index-1 pb-2 mb-n2" type="button" data-boundary="viewport" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="fas fa-cog" data-fa-transform="shrink-3 down-4"></span></button>
                  <div class="dropdown-menu dropdown-menu-end border py-2 rounded-2"><a class="dropdown-item" href="#!">Mute</a>
                    <div class="dropdown-divider"></div><a class="dropdown-item" href="#!">Archive</a><a class="dropdown-item text-danger" href="#!">Delete</a>
                    <div class="dropdown-divider"></div><a class="dropdown-item" href="#!">Mark as Unread</a><a class="dropdown-item" href="#!">Something's Wrong</a><a class="dropdown-item" href="#!">Ignore Messsages</a><a class="dropdown-item" href="#!">Block Messages</a>
                  </div>
                </div>
              </div>
              <div class="d-flex p-3">
                <div class="avatar avatar-xl">
                  <img class="rounded-circle" src="../assets/img/team/12.jpg" alt="" />

                </div>
                <div class="flex-1 chat-contact-body ms-2 d-md-none d-lg-block">
                  <div class="d-flex justify-content-between">
                    <h6 class="mb-0 chat-contact-title">Joe Bempsie</h6><span class="message-time fs--2">Wed</span>
                  </div>
                  <div class="min-w-0">
                    <div class="chat-contact-content pe-3">Hello!
                    </div>
                    <div class="position-absolute bottom-0 end-0 hover-hide">
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="hover-actions-trigger chat-contact nav-item" role="tab" id="chat-link-9" data-bs-toggle="tab" data-bs-target="#chat-9" aria-controls="chat-9" aria-selected="false">
              <div class="d-md-none d-lg-block">
                <div class="dropdown dropdown-active-trigger dropdown-chat">
                  <button class="hover-actions btn btn-link btn-sm text-400 dropdown-caret-none dropdown-toggle end-0 fs-0 mt-4 me-1 z-index-1 pb-2 mb-n2" type="button" data-boundary="viewport" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="fas fa-cog" data-fa-transform="shrink-3 down-4"></span></button>
                  <div class="dropdown-menu dropdown-menu-end border py-2 rounded-2"><a class="dropdown-item" href="#!">Mute</a>
                    <div class="dropdown-divider"></div><a class="dropdown-item" href="#!">Archive</a><a class="dropdown-item text-danger" href="#!">Delete</a>
                    <div class="dropdown-divider"></div><a class="dropdown-item" href="#!">Mark as Unread</a><a class="dropdown-item" href="#!">Something's Wrong</a><a class="dropdown-item" href="#!">Ignore Messsages</a><a class="dropdown-item" href="#!">Block Messages</a>
                  </div>
                </div>
              </div>
              <div class="d-flex p-3">
                <div class="avatar avatar-xl">
                  <img class="rounded-circle" src="../assets/img/team/22.jpg" alt="" />

                </div>
                <div class="flex-1 chat-contact-body ms-2 d-md-none d-lg-block">
                  <div class="d-flex justify-content-between">
                    <h6 class="mb-0 chat-contact-title">Diana Rigg</h6><span class="message-time fs--2">Mon</span>
                  </div>
                  <div class="min-w-0">
                    <div class="chat-contact-content pe-3">You: Yes, in an organization stature, this is a must. Besides, we need to quickly establish all other professional appearances, e.g., having a website where membersâ€™ profile will be displayed along with additional organizational information. Providing services to existing members is more important than attracting new members at this moment, in my opinion..
                    </div>
                    <div class="position-absolute bottom-0 end-0 hover-hide"><span class="fas fa-check text-400" data-fa-transform="shrink-5 down-4"></span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="hover-actions-trigger chat-contact nav-item" role="tab" id="chat-link-10" data-bs-toggle="tab" data-bs-target="#chat-10" aria-controls="chat-10" aria-selected="false">
              <div class="d-md-none d-lg-block">
                <div class="dropdown dropdown-active-trigger dropdown-chat">
                  <button class="hover-actions btn btn-link btn-sm text-400 dropdown-caret-none dropdown-toggle end-0 fs-0 mt-4 me-1 z-index-1 pb-2 mb-n2" type="button" data-boundary="viewport" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="fas fa-cog" data-fa-transform="shrink-3 down-4"></span></button>
                  <div class="dropdown-menu dropdown-menu-end border py-2 rounded-2"><a class="dropdown-item" href="#!">Mute</a>
                    <div class="dropdown-divider"></div><a class="dropdown-item" href="#!">Archive</a><a class="dropdown-item text-danger" href="#!">Delete</a>
                    <div class="dropdown-divider"></div><a class="dropdown-item" href="#!">Mark as Unread</a><a class="dropdown-item" href="#!">Something's Wrong</a><a class="dropdown-item" href="#!">Ignore Messsages</a><a class="dropdown-item" href="#!">Block Messages</a>
                  </div>
                </div>
              </div>
              <div class="d-flex p-3">
                <div class="avatar avatar-xl">
                  <img class="rounded-circle" src="../assets/img/team/23.jpg" alt="" />

                </div>
                <div class="flex-1 chat-contact-body ms-2 d-md-none d-lg-block">
                  <div class="d-flex justify-content-between">
                    <h6 class="mb-0 chat-contact-title">Gemma Whelan</h6>
                  </div>
                  <div class="min-w-0">
                    <div class="chat-contact-content pe-3">Say hi to your new friend
                    </div>
                    <div class="position-absolute bottom-0 end-0 hover-hide">
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <form class="contacts-search-wrapper">
          <div class="form-group mb-0 position-relative d-md-none d-lg-block w-100 h-100">
            <input class="form-control form-control-sm chat-contacts-search border-0 h-100" type="text" placeholder="Search contacts ..." /><span class="fas fa-search contacts-search-icon"></span>
          </div>
          <button class="btn btn-sm btn-transparent d-none d-md-inline-block d-lg-none"><span class="fas fa-search fs--1"></span></button>
        </form>
      </div> -->
    <div class="tab-content card-chat-content">
      <div class="tab-pane card-chat-pane active" id="chat-0" role="tabpanel" aria-labelledby="chat-link-0">
        <div class="chat-content-header">
          <div class="row flex-between-center">
            <div class="col-6 col-sm-8 d-flex align-items-center"><a class="pe-3 text-700 d-md-none contacts-list-show"
                href="#!">
                <div class="fas fa-chevron-left"></div>
              </a>
              <div class="min-w-0">
                <h5 class="mb-0 text-truncate fs-0">{{room.title}}</h5>
                <div class="fs--2 text-400">created by @{{room.host}}
                </div>
              </div>
            </div>
            <div class="col-auto">
              <button class="btn btn-sm btn-falcon-primary me-2" type="button" data-index="0" data-bs-toggle="tooltip"
                data-bs-placement="top" title="Start a Call"><span class="fas fa-phone"></span></button>
              <button class="btn btn-sm btn-falcon-primary me-2" type="button" data-index="0" data-bs-toggle="tooltip"
                data-bs-placement="top" title="Start a Video Call"><span class="fas fa-video"></span></button>
              <button class="btn btn-sm btn-falcon-primary btn-info" type="button" data-index="0"
                data-bs-toggle="tooltip" data-bs-placement="top" title="Conversation Information"><span
                  class="fas fa-info"></span></button>
            </div>
          </div>
        </div>
        <div class="chat-content-body" style="display: inherit;">
          <div class="conversation-info" data-index="0">
            <div class="h-100 overflow-auto scrollbar">
              <div class="d-flex position-relative align-items-center p-3 border-bottom">
                <!-- <div class="avatar avatar-xl status-online">
                    <img class="rounded-circle" src="/static/assets/img/team/avatar.png" alt="">

                  </div> -->
                <div class="flex-1 ms-2 d-flex flex-between-center">
                  <h6 class="mb-0"><a class="text-decoration-none stretched-link text-700"
                      href="">{{room.title}}</a><br>
                    <a class="text-decoration-none stretched-link text-700" href="" style="font-size: 11px;">Created
                      {{room.created_at|timesince}} ago</a>
                  </h6>


                  <div class="dropdown z-index-1">
                    <button class="btn btn-link btn-sm text-400 dropdown-toggle dropdown-caret-none me-n3" type="button"
                      id="profile-dropdown-0" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span
                        class="fas fa-cog"></span></button>
                    <div class="dropdown-menu dropdown-menu-end border py-2" aria-labelledby="profile-dropdown-0"><a
                        class="dropdown-item" href="#!">Mute</a>
                      <div class="dropdown-divider"></div><a class="dropdown-item" href="#!">Archive</a>
                      {% if room.host == request.user or request.user.is_superuser %}
                      <a class="dropdown-item text-danger" href="{% url 'delete_room' room.id %}">Delete</a>
                      {% endif %}
                    </div>
                  </div>
                </div>
              </div>
              <!-- <div class="px-3 pt-2">
                <div class="nav flex-column font-sans-serif fw-medium"><a
                    class="nav-link d-flex align-items-center py-1 px-0 text-600" href="#!"><span
                      class="conversation-info-icon"><span class="fas fa-search me-1"
                        data-fa-transform="shrink-1 down-3"></span></span>Search in Conversation</a><a
                    class="nav-link d-flex align-items-center py-1 px-0 text-600" href="#!"><span
                      class="conversation-info-icon"><span class="fas fa-pencil-alt me-1"
                        data-fa-transform="shrink-1"></span></span>Edit Nicknames</a><a
                    class="nav-link d-flex align-items-center py-1 px-0 text-600" href="#!"><span
                      class="conversation-info-icon"><span class="fas fa-palette me-1"
                        data-fa-transform="shrink-1"></span></span><span>Change Color</span></a><a
                    class="nav-link d-flex align-items-center py-1 px-0 text-600" href="#!"><span
                      class="conversation-info-icon"><span class="fas fa-thumbs-up me-1"
                        data-fa-transform="shrink-1"></span></span>Change Emoji</a><a
                    class="nav-link d-flex align-items-center py-1 px-0 text-600" href="#!"><span
                      class="conversation-info-icon"><span class="fas fa-bell me-1"
                        data-fa-transform="shrink-1"></span></span>Notifications</a>
                      </div>
              </div>
              <hr class="my-2" /> -->

              <div class="px-3 pt-2" id="others-info-0">
                <div class="title" id="shared-media-title-0"><a
                    class="btn btn-link btn-accordion hover-text-decoration-none dropdown-indicator"
                    href="#shared-media-0" data-bs-toggle="collapse" aria-expanded="false"
                    aria-controls="shared-media-0">Topic</a></div>
                <div class="collapse" id="shared-media-0" aria-labelledby="shared-media-title-0"
                  data-parent="#others-info-0">
                  {{room.topic}}
                </div>
              </div>
              <hr class="my-2" />
              <div class="px-3" id="others-info-0">
                <div class="title" id="shared-media-title-0"><a
                    class="btn btn-link btn-accordion hover-text-decoration-none dropdown-indicator"
                    href="#shared-media-1" data-bs-toggle="collapse" aria-expanded="false"
                    aria-controls="shared-media-0">Description</a></div>
                <div class="collapse" id="shared-media-1" aria-labelledby="shared-media-title-0"
                  data-parent="#others-info-0">
                  {{room.description}}
                </div>
              </div>
              <hr class="my-2" />
              <div class="px-3" id="others-info-0">
                <div class="title" id="shared-media-title-0"><a
                    class="btn btn-link btn-accordion hover-text-decoration-none dropdown-indicator"
                    href="#shared-media-2" data-bs-toggle="collapse" aria-expanded="false"
                    aria-controls="shared-media-0">Members</a></div>
                <div class="collapse" id="shared-media-2" aria-labelledby="shared-media-title-0"
                  data-parent="#others-info-0">
                  <ul style="list-style: none; padding-left: 0;">
                    {% for member in members %}

                    <!-- check if member is host -->
                    {% if member.id == room.host_id %}
                    <li>
                      <div style="position: relative;
                      top: 11px;" class="avatar avatar-xl ">
                        <img class="rounded-circle" src="/static/assets/img/team/avatar.png" alt="">
                      </div>
                      <a href="#">{{member.username}}</a> (Host)
                    </li>
                    {% else %}
                    <li>
                      <div style="position: relative;
                      top: 11px;" class="avatar avatar-xl status-online">
                        <img class="rounded-circle" src="/static/assets/img/team/avatar.png" alt="">
                      </div>
                      <a href="#">{{member.username}}</a>
                    </li>
                    {% endif %}

                    {% endfor %}
                  </ul>
                </div>
              </div>
            </div>
          </div>
          <div class="chat-content-scroll-area scrollbar" id="chat-area">

            <!-- {% with time=room.created_at %} -->

            <!-- <script>
              console.log("{{time}}")
            </script> -->

            <!-- show date in every change of dd of next msg-->


            <!-- {% if message.timestamp|date:"Y-m-d" != time|date:"Y-m-d" %} -->

            <!-- <script>
              console.log('{{message.timestamp|date:"Y-m-d"}}')
            </script> -->

            <!-- <div class="text-center fs--2 text-500"><span>{{message.timestamp}}</span></div>
            {% with time=message.timestamp %}
            {% endwith %}
            {% endif %} -->

            {% if message.user == user %}
            <!-- <div class="d-flex p-3">
              <div class="flex-1 d-flex justify-content-end">
                <div class="w-100 w-xxl-75">
                  <div class="hover-actions-trigger d-flex flex-end-center">
                    <ul class="hover-actions position-relative list-inline mb-0 text-400 me-2">
                      <li class="list-inline-item"><a class="chat-option" href="#!" data-bs-toggle="tooltip"
                          data-bs-placement="top" title="Forward"><span class="fas fa-share"></span></a></li>
                      <li class="list-inline-item"><a class="chat-option" href="#!" data-bs-toggle="tooltip"
                          data-bs-placement="top" title="Archive"><span class="fas fa-archive"></span></a></li>
                      <li class="list-inline-item"><a class="chat-option" href="#!" data-bs-toggle="tooltip"
                          data-bs-placement="top" title="Edit"><span class="fas fa-edit"></span></a></li>
                      {% if message.user == request.user or room.host == request.user or request.user.is_superuser %}
                      <form method="POST" action="{% url 'delete_message' message.id %}">
                        {% csrf_token %}
                        <li class="list-inline-item"><a class="chat-option" value="Delete"
                            href="{% url 'delete_message' message.id %}" data-bs-toggle="tooltip"
                            data-bs-placement="top" title="Remove"><span class="fas fa-trash-alt"></span></a></li>
                      </form>
                      {% endif %}
                    </ul>
                    <div class="bg-primary text-white p-2 rounded-2 chat-message light">
                      <p class="mb-0">{{message.message}}</p>

                    </div>
                  </div>
                  <div class="text-400 fs--2 text-end">{{message.timestamp|date:"H:i"}}<span
                      class="fas fa-check ms-2 text-success"></span>
                  </div>
                </div>
              </div>
            </div> -->
            {% else %}
            <!-- 
            <div class="d-flex p-3">
              <div class="avatar avatar-l me-2">
                <img class="rounded-circle" src="/static/assets/img/team/avatar.png" alt="">

              </div>
              <div class="flex-1">
                <div class="w-xxl-75">
                  <div class="hover-actions-trigger d-flex align-items-center">
                    <div class="chat-message bg-200 p-2 rounded-2">{{message.message}}</div>
                    <ul class="hover-actions position-relative list-inline mb-0 text-400 ms-2">
                      <li class="list-inline-item"><a class="chat-option" href="#!" data-bs-toggle="tooltip"
                          data-bs-placement="top" title="Forward"><span class="fas fa-share"></span></a></li>
                      <li class="list-inline-item"><a class="chat-option" href="#!" data-bs-toggle="tooltip"
                          data-bs-placement="top" title="Archive"><span class="fas fa-archive"></span></a></li>
                      <li class="list-inline-item"><a class="chat-option" href="#!" data-bs-toggle="tooltip"
                          data-bs-placement="top" title="Edit"><span class="fas fa-edit"></span></a></li>
                      <li class="list-inline-item"><a class="chat-option" href="#!" data-bs-toggle="tooltip"
                          data-bs-placement="top" title="Remove"><span class="fas fa-trash-alt"></span></a></li>
                    </ul>
                  </div>
                  <div class="text-400 fs--2"><span class="fw-semi-bold me-2">{{message.user}}</span><span>
                      
                      {{message.timestamp|date:"H:i"}}
                    </span>
                  </div>
                </div>
              </div>
            </div> -->
            {% endif %}

            {% endwith %}






          </div>
        </div>
      </div>
      <form class="chat-editor-area" method="POST">
        {% csrf_token %}
        <textarea
          class="emojiarea-editor outline-none scrollbar shadow-none form-control rounded-1 resize-none px-card border-200"
          name="body" contenteditable="true" id="message-body" value=""></textarea>
        <!-- <input class="d-none" type="file" id="chat-file-upload" /> -->
        <!-- <label class="chat-file-upload cursor-pointer" for="chat-file-upload"><span class="fas fa-paperclip"></span></label> -->
        <div class="btn btn-link emoji-icon" data-emoji-button="data-emoji-button"><span
            class="far fa-laugh-beam"></span></div>
        <button id="send" class="btn btn-sm btn-send" type="submit">Send</button>
        <script>
          // check if message-body is empty and keep send disabled using jquery
          $(document).ready(function () {
            $("#send").prop("disabled", true);
            $("#message-body").keyup(function () {
              if ($(this).val().length != 0)
                $("#send").prop("disabled", false);
              else
                $("#send").prop("disabled", true);
            });
          });
        </script>
      </form>

    </div>
  </div>
</div>


<!-- End Prev MEssages -->

<script>
  // const currentTheme = localStorage.getItem('theme') ? localStorage.getItem('theme') : null;
  // const button = document.querySelector('#emoji-button');
  // const picker = new EmojiButton(
  //   {
  //     theme: currentTheme == 'dark' ? 'dark' : 'light',
  //     showPreview: false,
  //     autoHide: false
  //   }
  // );
  // button.addEventListener('click', () => {
  //   picker.togglePicker(button);

  // });
  // picker.on('emoji', emoji => {
  //   document.querySelector('#message-body').value += emoji;
  // });

  // make a ajax request to get message
  $(document).ready(function getMessages() {
    $.ajax({
      url: "{% url 'get_messages' pk=room.id %}",
      type: "GET",
      success: function (data) {
        // console.log(data);

        // for loop over data.messages
        for (let i = 0; i < data.messages.length; i++) {
          // check if message is from current user
          // console.log(data.messages[i].message);
          // $("#messages").html(data);
          // add message to the id #chat-area
          // $("#chat-area").append(data.messages[i].message);
          // check if message is from current user
          if (data.messages[i].user_id.toString() == "{{user.id}}") {
            
            // add message to the id #chat-area
            var messageid = data.messages[i].id.toString();
            var messageContent = data.messages[i].message;
            var messageTime = data.messages[i].timestamp;
            var messageTime = messageTime.slice(11, 16);
            var messageUser = data.messages[i].user_id;
            var djangostring = "{% url 'delete_message' "+messageid+" %}"
            console.log(djangostring);
            for (let j = 0; j < data.usr.length; j++) {
              if (data.usr[j].id.toString() == messageUser.toString()) {
                var messageUsername = data.usr[j].username;
              }
            }
            console.log(messageid+"____________");
            $("#chat-area").append(
              `<div class="d-flex p-3">
              <div class="flex-1 d-flex justify-content-end">
                <div class="w-100 w-xxl-75">
                  <div class="hover-actions-trigger d-flex flex-end-center">
                    <ul class="hover-actions position-relative list-inline mb-0 text-400 me-2">
                      <li class="list-inline-item"><a class="chat-option" href="#!" data-bs-toggle="tooltip"
                          data-bs-placement="top" title="Forward"><span class="fas fa-share"></span></a></li>
                      <li class="list-inline-item"><a class="chat-option" href="#!" data-bs-toggle="tooltip"
                          data-bs-placement="top" title="Archive"><span class="fas fa-archive"></span></a></li>
                      <li class="list-inline-item"><a class="chat-option" href="#!" data-bs-toggle="tooltip"
                          data-bs-placement="top" title="Edit"><span class="fas fa-edit"></span></a></li>
                      {% if message.user == request.user or room.host == request.user or request.user.is_superuser %}
                      <form method="POST" action="">
                        {% csrf_token %}
                        <li class="list-inline-item"><a class="chat-option" value="Delete"
                            href="" data-bs-toggle="tooltip"
                            data-bs-placement="top" title="Remove"><span class="fas fa-trash-alt"></span></a></li>
                      </form>
                      {% endif %}
                    </ul>
                    <div class="bg-primary text-white p-2 rounded-2 chat-message light">
                      <p class="mb-0">`+ data.messages[i].message + `</p>

                    </div>
                  </div>
                  <div class="text-400 fs--2 text-end">`+ messageTime+`<span
                      class="fas fa-check ms-2 text-success"></span>
                  </div>
                </div>
              </div>
            </div>`
            );
          } else {
            var messageid = data.messages[i].id.toString();
            var messageContent = data.messages[i].message;
            var messageTime = data.messages[i].timestamp;
            var messageTime = messageTime.slice(11, 16);
            var messageUser = data.messages[i].user_id;
            for (let j = 0; j < data.usr.length; j++) {
              if (data.usr[j].id.toString() == messageUser.toString()) {
                var messageUsername = data.usr[j].username;
              }
            }
            // add message to the id #chat-area
            $("#chat-area").append(
              `
              <div class="d-flex p-3">
              <div class="avatar avatar-l me-2">
                <img class="rounded-circle" src="/static/assets/img/team/avatar.png" alt="">

              </div>
              <div class="flex-1">
                <div class="w-xxl-75">
                  <div class="hover-actions-trigger d-flex align-items-center">
                    <div class="chat-message bg-200 p-2 rounded-2">`+ data.messages[i].message + `</div>
                    <ul class="hover-actions position-relative list-inline mb-0 text-400 ms-2">
                      <li class="list-inline-item"><a class="chat-option" href="#!" data-bs-toggle="tooltip"
                          data-bs-placement="top" title="Forward"><span class="fas fa-share"></span></a></li>
                      <li class="list-inline-item"><a class="chat-option" href="#!" data-bs-toggle="tooltip"
                          data-bs-placement="top" title="Archive"><span class="fas fa-archive"></span></a></li>
                      <li class="list-inline-item"><a class="chat-option" href="#!" data-bs-toggle="tooltip"
                          data-bs-placement="top" title="Edit"><span class="fas fa-edit"></span></a></li>
                      <li class="list-inline-item"><a class="chat-option" href="#!" data-bs-toggle="tooltip"
                          data-bs-placement="top" title="Remove"><span class="fas fa-trash-alt"></span></a></li>
                    </ul>
                  </div>
                  <div class="text-400 fs--2"><span class="fw-semi-bold me-2">`+ messageUsername +`</span><span>
                      
                      `+  messageTime+`
                    </span>
                  </div>
                </div>
              </div>
            </div>
              `
            );
          }

        }
      },
      complete: function () {
        // Schedule the next request when the current one's complete
        // setTimeout(getMessages, 1000);
      }

    });
  }
  )



</script>

{% endblock content %}